
/* SmartTuition 2014-09-23*/
!function(){"use strict";function a(a,b){function c(c){var d=h+"/api/Account/Register",e=b.defer();return a({method:"POST",url:d,data:c}).success(function(a){console.log(a),e.resolve(a)}).error(function(a,b){console.log(a),e.reject(b)}),e.promise}function d(c){var d=h+"/Token";c.grant_type||(c.grant_type="password");var e=b.defer();return a({method:"POST",url:d,data:c}).success(function(a){i=a.access_token,console.log(a),e.resolve(a)}).error(function(a,b){console.log(a),e.reject(b)}),e.promise}function e(){var c=h+"/api/values/",d=b.defer();return a({method:"GET",url:c,headers:f()}).success(function(a){console.log(a),d.resolve(a)}).error(function(a,b){console.log(a),d.reject(b)}),d.promise}function f(){return i?{Authorization:"Bearer "+i}:void 0}var g={registerUser:c,loginUser:d,getValues:e},h="http://localhost:57496";return g;var i}angular.module("CorsIntegration.Services").factory(a,["$http","$q",a])}(),function(){"use strict";var a=angular.module("CorsIntegration.Controllers");a.controller("LoginController",["$scope","accountsService",function(a,b){var c=a;c.loginData={userName:"",password:""},c.loginUser=function(){b.loginUser(c.loginData).then(function(a){c.isLoggedIn=!0,c.userName=a.userName,c.bearerToken=a.access_token,console.log("loged in")},function(a,b){c.isLoggedIn=!1,console.log(b)})}}])}(),function(){"use strict";var a=angular.module("CorsIntegration.Controllers");a.controller("CreateAccountController",["$scope","accountsService",function(a,b){var c=a;c.registerUserData={email:"",password:"",confirmPassword:""},c.registerUser=function(){console.log("Llamo bien"),b.registerUser(c.registerUserData).then(function(){c.isRegistered=!0,console.log("User registered")},function(a,b){c.isRegistered=!1,console.log(a),console.log(b)})}}])}(),function(){"use strict";var a=angular.module("CorsIntegration.Controllers");a.controller("ProductDetailsController",["productsService",function(){var a=this;a.loginData={userName:"",password:""},a.loginUser=function(){accountsService.loginUser(a.loginData).then(function(b){a.isLoggedIn=!0,a.userName=b.userName,a.bearerToken=b.access_token,console.log("loged in")},function(b,c){a.isLoggedIn=!1,console.log(c)})}}])}(),function(){"use strict";var a=angular.module("CorsIntegration.Controllers");a.controller("ProductsListController",["productsService",function(){var a=this;a.loginData={userName:"",password:""},a.loginUser=function(){accountsService.loginUser(a.loginData).then(function(b){a.isLoggedIn=!0,a.userName=b.userName,a.bearerToken=b.access_token,console.log("loged in")},function(b,c){a.isLoggedIn=!1,console.log(c)})}}])}();var appId="CorsIntegration",serviceModule="CorsIntegration.Services",appControllersId="CorsIntegration.Controllers",loginControllerId="LoginController",createAccountsControllerId="CreateAccountController",productsListControllerId="ProductsListController",productDetailsControllerId="ProductDetailsController";!function(){"use strict";var a=angular.module("CorsIntegration.Services",[]);angular.module("CorsIntegration.Controllers",["CorsIntegration.Services"]);var b=angular.module("CorsIntegration",["ngRoute","CorsIntegration.Controllers","CorsIntegration.Services"]);b.config(function(a){a.when("/createLogin",{templateUrl:"../accounts/register/createAccount.html",controller:"CreateAccountController"}).when("/login",{templateUrl:"../accounts/login/login.html",controller:"LoginController"}).when("/products",{templateUrl:"../products/list/productsList.html",controller:"ProductsListController"}).when("/productDetails",{templateUrl:"../products/detail/productDetails.html",controller:"ProductDetailsController"}).otherwise({redirectTo:"/login"})}),a.config(["$httpProvider",function(a){a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",a.defaults.transformRequest=[function(a){var b=function(a){var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=b(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=b(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j};return angular.isObject(a)&&"[object File]"!==String(a)?b(a):a}]}]),b.run(["$q","$rootScope",function(){}])}();